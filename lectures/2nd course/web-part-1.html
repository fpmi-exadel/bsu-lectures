<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Web applications in Java</title>

    <meta name="author" content="Maxim Shmidov">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <link rel="stylesheet" href="reveal/css/reveal.css">
    <link rel="stylesheet" href="reveal/css/theme/exadel/exadel.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="reveal/lib/css/googlecode.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write('<link rel="stylesheet" href="reveal/css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
    </script>

    <!--[if lt IE 9]>
    <script src="reveal/lib/js/html5shiv.js"></script>
    <![endif]-->

</head>

<body>

    <div id="exadel-header"></div>

    <div class="reveal">
        <div class="slides"><!-- Any section element inside of this container is displayed as a slide -->

            <section>

                <h1>Web applications in Java part 1</h1>

                <p class="thesis">Web-приложения на данный момент доминируют на рынке ПО.</p>

                <p class="thesis">Опыт разработки web-приложений пригодится и на быстро растущем рынке мобильных
                    приложений.</p>

            </section>

            <section>
                <h1>Клиент-серверная архитектура</h1>

                <h2>Толстый клиент</h2>

                <p class="thesis">В данной модели сервер отвечает за хранение данных, организацию и разграничение
                    доступа к ним. Клиент выполняет большую часть вычислительной работы.</p>

                <p>Преимущества:</p>
                <ul>
                    <li>Высокая скорость обработки данных.</li>
                    <li>&laquo;Родной&raquo; пользовательский интерфейс.</li>
                </ul>
                <p>Недостатки:</p>
                <ul>
                    <li>Сложность обновления клиентского ПО.</li>
                    <li>Необходимость поддерживать версии для разных ОС.</li>
                </ul>

            </section>

            <section>
                <h1>Клиент-серверная архитектура</h1>

                <h2>Тонкий web-клиент</h2>

                <p class="thesis">В данной модели вычислениями занимается в основном сервер. Клиент отображает
                    интерфейс, запрашивает данные и минимально манипулирует ими.</p>

                <p>Преимущества:</p>
                <ul>
                    <li>Клиенту нужен только браузер.</li>
                    <li>Одна версия ПО годится для любой ОС.</li>
                    <li>Новая версия мгновенно становится доступна всем.</li>
                </ul>
                <p>Недостатки:</p>
                <ul>
                    <li>Необходимо решать проблемы масштабирования серверов.</li>
                    <li>Полная зависимость клиента от работоспособности сетевого подключения.</li>
                </ul>

            </section>

            <section>
                <h1>Технический стек веб-приложения</h1>

                <dl>
                    <dt>Интерфейс</dt>
                    <dd><abbr title="Hypertext Markup Language">HTML</abbr> + <abbr
                            title="Cascading Stylesheets">CSS</abbr> + JavaScript
                    </dd>
                    <dt>Коммуникация с сервером</dt>
                    <dd><abbr title="Hypertext Transfer Protocol">HTTP</abbr> + <abbr
                            title="JavaScript Object Notation">JSON</abbr> или <abbr title="Extensible Markup Language">XML</abbr>
                    </dd>
                    <dt>Серверная логика</dt>
                    <dd>Java, PHP, Python, Ruby и множество других языков программирования</dd>
                </dl>

            </section>

            <section>
                <section>
                    <h1>HTTP (1/5)</h1>

                    <p class="thesis">HTTP &mdash; это протокол обмена данными между клиентом и сервером по
                        принципу &laquo;запрос&ndash;ответ&raquo;</p>

                    <p class="thesis">HTTP определяет список стандартных типов запроса (методов)</p>

                    <p class="thesis">HTTP определяет список стандартных кодов ответа</p>

                    <p class="thesis">HTTP&ndash;сообщение &mdash; это простой текст</p>

                </section>

                <section>
                    <h1>HTTP (2/5)</h1>
                    <h2>Методы</h2>
                    <dl>
                        <dt>GET</dt>
                        <dd>Запрашивает у сервера ресурс</dd>
                        <dt>POST</dt>
                        <dd>Отправляет на сервер данные</dd>
                        <dt>HEAD</dt>
                        <dd>Запрашивет у сервера заголовки ресурса</dd>
                        <dt>OPTIONS</dt>
                        <dd>Запрашивает у сервера список методов, применимых к ресурсу</dd>
                        <dt>PUT</dt>
                        <dd>Предлагает серверу сохранить передаваемые данные в качестве нового ресурса</dd>
                        <dt>DELETE</dt>
                        <dd>Предлагает серверу удалить ресурс</dd>
                    </dl>

                </section>

                <section>
                    <h1>HTTP (3/5)</h1>

                    <h2>Статусы (коды ответа)</h2>
                    <ul>
                        <li>1xx &mdash; информационные</li>
                        <li>2xx &mdash; успешные</li>
                        <li>3xx &mdash; перенаправление</li>
                        <li>4xx &mdash; ошибки клиента</li>
                        <li>5xx &mdash; ошибки сервера</li>
                    </ul>

                    <p>Наиболее частые статусы:</p>
                    <ul>
                        <li>200 OK</li>
                        <li>403 Forbidden</li>
                        <li>404 Not Found</li>
                        <li>502 Bad Gateway</li>
                        <li>504 Gateway Timeout</li>
                    </ul>

                </section>

                <section>
                    <h1>HTTP (4/5)</h1>

                    <h2>Пример запроса</h2>

                    <p>Начальная строка:</p>
                    <pre><code>GET / HTTP/1.1</code></pre>
                    <p>Заголовки</p>
                    <pre><code class="HTTP">Host: www.isup.me
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.68 Safari/537.17
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,ru;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3</code></pre>
                    <p>Обязательная пустая строка</p>
                    <pre><code><br></code></pre>
                    <p>Тело сообщения (необязательно)</p>
                    <pre><code>[Его в нашем случае и нет. В случае POST-запроса здесь были бы данные.]</code></pre>

                </section>

                <section>
                    <h1>HTTP (5/5)</h1>

                    <h2>Пример ответа</h2>


                    <p>Начальная строка:</p>
                    <pre><code class="HTTP">HTTP/1.1 200 OK</code></pre>

                    <p>Заголовки</p>
                    <pre><code class="HTTP">Server: nginx/1.2.1
Date: Fri, 08 Feb 2013 11:04:05 GMT
Content-Type: text/html;charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Status: 200
Content-Encoding: gzip</code></pre>
                    <p>Обязательная пустая строка</p>
                    <pre><code><br></code></pre>
                    <p>Тело сообщения</p>
                    <pre><code>&lt;html&gt;
    &lt;head&gt;
        ...
    &lt;/head&gt;
    &lt;body&gt;
        ...
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                </section>

            </section>

            <section>
                <section>
                    <h1>Передача данных на сервер (1/3)</h1>
                    <h2>Query string (для GET-запросов)</h2>
                    <pre><code class="HTTP">http://en.wikipedia.org/w/index.php?search=http&title=Special%3ASearch&fulltext=1</code></pre>
                    <ul>
                        <li>После имени ресурса ставим вопрос</li>
                        <li>Перечисляем параметры в формате &laquo;ключ=значение&raquo;</li>
                        <li>Разделяем параметры амперсандом</li>
                        <li>Заменяем не-ASCII символы на их коды по стандарту URL encoding</li>
                    </ul>
                </section>
                <section>
                    <h1>Передача данных на сервер (2/3)</h1>
                    <h2><abbr title="Representational State Transfer">REST</abbr>ful URLs (для GET и POST-запросов)</h2>
                    <pre><code class="HTTP">http://en.wikipedia.org/search/fulltext/http</code></pre>
                    <ul>
                        <li>На сервере нет физического ресурса, соответствующего данному URL</li>
                        <li>Вместо этого серверное приложение обрабатывает URL, выделяя из него параметры</li>
                    </ul>
                </section>
                <section>
                    <h1>Передача данных на сервер (3/3)</h1>
                    <h2>POST-параметры (для POST-запросов)</h2>
                    <pre><code class="HTTP">POST http://en.wikipedia.org/w/index.php HTTP/1.1
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.68 Safari/537.17
Content-Type: application/x-www-form-urlencoded
Content-Length: 45

search=http&title=Special%3ASearch&fulltext=1</code></pre>
                    <ul>
                        <li>Параметры формируются так же, как в случае query string</li>
                        <li>Параметры отправляются в теле POST-запроса</li>
                    </ul>

                </section>
            </section>

            <section>
                <h1>Серверные приложения</h1>
                <p>Серверное ПО состоит как правило из двух характерных частей:</p>
                <dl>
                    <dt>Веб-сервер</dt>
                    <dd>Контейнер, в котором &laquo;крутятся&raquo; ваши приложения. Берёт на себя однообразную техническую работу.</dd>
                    <dt>Приложение</dt>
                    <dd>Ваш код, решающий ваши задачи.</dd>
                </dl>

               <p>В Java это выглядит так:</p>
                <dl>
                    <dt>Веб-сервер</dt>
                    <dd>Apache Tomcat, Glassfish, JBoss AS, и.т.п.</dd>
                    <dt>Приложение</dt>
                    <dd>Java-классы, специальным образом упакованные в war-архив</dd>
                </dl>

            </section>

            <section>
                <h1>WAR</h1>
                <ul>
                    <li>.war&ndash;файл &mdash; это zip&ndash;файл, в котором лежат классы, страницы и другие
                        файлы, необходимые для работы веб-приложения.</li>
                    <li>war&ndash;файл должен иметь определённую структуру:
                        <dl>
                            <dt>/WEB-INF/</dt>
                            <dd>Всё, что находится в этом каталоге, защищено от прямого доступа из сети. Здесь находится
                                основная часть приложения.</dd>
                            <dt>/WEB-INF/web.xml</dt>
                            <dd>В этом файле содержатся ключевые настройки вашего приложения.</dd>
                            <dt>/WEB-INF/classes/</dt>
                            <dd>В этом каталоге находятся скомпилированные классы java&ndash;приложения.</dd>
                            <dt>/WEB-INF/lib/</dt>
                            <dd>В этом каталоге находятся jar&ndash;библиотеки, необходимые приложению.</dd>
                        </dl>
                        Снаружи каталога WEB-INF обычно кладут веб-страницы, скрипты, стили и другой статический контент.
                    </li>
                    <li>Все java&ndash;сервера умеют работать с организованным таким образом war&ndash;файлами.</li>
                </ul>
            </section>

            <section>
                <h1>web.xml</h1>
                <pre><code class="xml">&lt;!DOCTYPE web-app PUBLIC
"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
"http://java.sun.com/dtd/web-app_2_3.dtd" &gt;

&lt;web-app&gt;
    &lt;display-name&gt;Web Demo Application&lt;/display-name&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.exadel.lectures.second.web.hello.HelloServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/hello.html&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;

&lt;/web-app&gt;</code></pre>
            </section>

            <section>
                <section>
                    <h1>Servlet API (1/2)</h1>
                    <h2>javax.servlet.http.HttpServlet</h2>
                    <p class="thesis">Http&ndash;сервлет - это класс, предназначенный для обслуживания входящих HTTP&ndash;запросов.</p>
                    <pre><code class="java">public abstract class HttpServlet extends GenericServlet
        implements java.io.Serializable {

        protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException;

        protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException;

        protected void doPut(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException;

        protected void doDelete(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException;

        protected void service(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException;

    }</code></pre>
                </section>

                <section>
                    <h1>Servlet API (2/2)</h1>
                    <pre><code class="java">@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

    final String name = request.getParameter("name");
    response.getWriter().write("&lt;html&gt;&lt;body&gt;" + name + "&lt;/body&gt;&lt;/html&gt;");
}</code></pre>
                </section>
            </section>

            <section>

                <section>
                   <h1>Apache Tomcat (1/2)</h1>
                   <p><a href="http://tomcat.apache.org/">http://tomcat.apache.org/</a></p>

                    <ul>
                        <li>Простой и надёжный контейнер сервлетов</li>
                        <li>Реализует стандарты Java Servlet и JavaServer Pages</li>
                        <li>Очень популярен</li>
                        <li>Легко развернуть и настроить</li>
                    </ul>

                </section>

                <section>
                    <h1>Apache Tomcat (1/2)</h1>
                    <h2>Установка</h2>

                    <ol>
                        <li>Ставим Java</li>
                        <li>Скачиваем и распаковываем tomcat</li>
                        <li>Запускать: bin/startup.bat</li>
                        <li>war&ndash;файлы класть в каталог webapp</li>
                        <li>Приложения доступны по адресу http://localhost:8080/{имя war&ndash;файла}/</li>
                        <li>Останавливать: bin/shutdown.bat</li>
                    </ol>
                </section>

            </section>

            <section>
                <h1>JSP</h1>
                <pre><code class="jsp">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
                    &lt;%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Hello using JSP&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello&lt;c:if test="${not empty param.name}"&gt; &lt;c:out value=" ${param.name}"/&gt;&lt;/c:if&gt;!!!&lt;/h1&gt;
    &lt;p&gt;Response to &lt;c:out value="${pageContext.request.method}"/&gt; request&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
            </section>

        </div>
    </div>

    <script src="reveal/lib/js/head.min.js"></script>
    <script src="reveal/js/reveal.min.js"></script>

    <script>
        Reveal.initialize({

            controls: true,// Display controls in the bottom right corner
            progress: true,	// Display a presentation progress bar
            history: false,// Push each slide change to the browser history
            keyboard: true,// Enable keyboard shortcuts for navigation
            overview: true,// Enable the slide overview mode
            center: false,	// Vertical centering of slides
            loop: false,// Loop the presentation
            rtl: false,	// Change the presentation direction to be RTL
            autoSlide: 0,
            mouseWheel: false,// Enable slide navigation via mouse wheel
            rollingLinks: false,// Apply a 3D roll to links on hover
            transition: 'linear', 	// Transition style default/cube/page/concave/zoom/linear/none

            dependencies: [
                // Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
                { src: 'reveal/lib/js/classList.js', condition: function () {
                    return !document.body.classList;
                } },
                // Interpret Markdown in <section> elements
                { src: 'reveal/plugin/markdown/showdown.js', condition: function () {
                    return !!document.querySelector('[data-markdown]');
                } },
                { src: 'reveal/plugin/markdown/markdown.js', condition: function () {
                    return !!document.querySelector('[data-markdown]');
                } },
                // Syntax highlight for <code> elements
                { src: 'reveal/plugin/highlight/highlight.pack.js', async: true, callback: function () {
                    hljs.tabReplace = '    ';
                    hljs.initHighlightingOnLoad();
                } },
                // Zoom in and out with Alt+click
                { src: 'reveal/plugin/zoom-js/zoom.js', async: true, condition: function () {
                    return !!document.body.classList;
                } },
                // Speaker notes
                { src: 'reveal/plugin/notes/notes.js', async: true, condition: function () {
                    return !!document.body.classList;
                } },
                { src: 'reveal/plugin/clock/clock.js', async: true, callback: function () {
                    clock.init("exadel-header");
                } }
            ]
        });
    </script>
</body>
</html>
